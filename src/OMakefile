include Atdgen

USE_OCAMLFIND = true

OCAMLPACKS[] =
   yojson
   netclient
   equeue-ssl
   atdgen
   ssl

if $(not $(OCAMLFIND_EXISTS))
   eprintln(This project requires ocamlfind, but is was not found.)
   eprintln(You need to install ocamlfind and run "omake --configure".)
   exit 1

BYTE_ENABLED = true
NATIVE_ENABLED = true

API_FILES = apiKey_t apiKey_j

Atdgen(apiKey, -j-std)
OCamlLibrary(apiKey, $(API_FILES))

RESPONSES_FILES = responses_t responses_j

Atdgen(responses, -j-std)
OCamlLibrary(responses, $(RESPONSES_FILES))

DO_FILES = digitalocean util record $(RESPONSES_FILES)
OCamlLibrary(digitalocean, $(DO_FILES))

clean:
	rm -f *.cm[ioxa] *.cmx[as] *.[oa]
	rm -f $(ATDGEN_OUTFILES)
